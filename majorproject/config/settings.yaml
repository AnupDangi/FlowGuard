# FlowGuard Application Configuration

app:
  name: flowguard
  version: 0.1.0
  environment: ${ENVIRONMENT:development}

events_gateway:
  host: ${EVENTS_GATEWAY_HOST:0.0.0.0}
  port: ${EVENTS_GATEWAY_PORT:8000}
  reload: ${EVENTS_GATEWAY_RELOAD:true}
  workers: 1
  log_level: ${LOG_LEVEL:INFO}
  
  # API Configuration
  api:
    title: "FlowGuard Events Gateway API"
    description: "Real-time event ingestion gateway for Zomato analytics pipeline"
    version: "1.0.0"
    docs_url: "/docs"
    redoc_url: "/redoc"

kafka:
  bootstrap_servers: ${KAFKA_BOOTSTRAP_SERVERS:localhost:19092,localhost:19093,localhost:19094}
  client_id: ${KAFKA_CLIENT_ID:events-gateway}
  
  # Producer Configuration
  producer:
    acks: all  # Wait for all replicas
    retries: 3
    max_in_flight_requests: 5
    compression_type: snappy
    linger_ms: 10
    batch_size: 16384
    
  # Consumer Configuration (for future use)
  consumer:
    auto_offset_reset: earliest
    enable_auto_commit: false
    max_poll_records: 500

logging:
  version: 1
  disable_existing_loggers: false
  formatters:
    default:
      format: '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
    json:
      format: '{"time": "%(asctime)s", "name": "%(name)s", "level": "%(levelname)s", "message": "%(message)s"}'
  handlers:
    console:
      class: logging.StreamHandler
      formatter: default
      stream: ext://sys.stdout
    file:
      class: logging.handlers.RotatingFileHandler
      formatter: json
      filename: logs/app.log
      maxBytes: 10485760  # 10MB
      backupCount: 5
  root:
    level: INFO
    handlers: [console, file]
